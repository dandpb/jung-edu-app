<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jung Educational App - Mock</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 16px;
        }
        label {
            display: block;
            margin-bottom: 4px;
            font-weight: bold;
        }
        input, button {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        button {
            background-color: #007bff;
            color: white;
            cursor: pointer;
            margin-top: 8px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            background: #fafafa;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #28a745;
            width: 25%;
            transition: width 0.3s ease;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="container">
        <h1>Login - Jung Educational App</h1>
        <form data-testid="login-form">
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" data-testid="email-input" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" data-testid="password-input" required>
                <button type="button" data-testid="password-toggle" style="width: auto; margin-left: 8px;">üëÅÔ∏è</button>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" data-testid="remember-me-checkbox"> Remember Me
                </label>
            </div>
            <div data-testid="server-error" class="hidden" style="color: red; margin-bottom: 16px;">
                Invalid credentials
            </div>
            <button type="submit" data-testid="login-button">Login</button>
            <a href="#" data-testid="register-link">Create Account</a>
            <a href="#" data-testid="forgot-password-link">Forgot Password?</a>
        </form>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboardPage" class="container hidden">
        <div data-testid="dashboard-header">
            <h1 data-testid="welcome-message">Bem-vindo √† Psicologia Anal√≠tica de Jung</h1>
            <p data-testid="dashboard-description">Explore as profundezas da psique humana</p>
        </div>

        <nav data-testid="main-navigation">
            <button data-testid="user-menu">User Menu</button>
            <div data-testid="profile-menu-item" class="hidden">Profile</div>
            <div data-testid="settings-menu-item" class="hidden">Settings</div>
            <div data-testid="logout-menu-item" class="hidden">Logout</div>
        </nav>

        <div data-testid="progress-section">
            <div class="card" data-testid="progress-chart">
                <h3>Progress Overview</h3>
                <div data-testid="completion-stats">
                    <span>Completion: <span data-testid="completion-percentage">25%</span></span>
                </div>
                <div class="progress-bar" data-testid="progress-bar">
                    <div class="progress-fill"></div>
                </div>
            </div>
            <div class="card" data-testid="completion-stats">
                <h3>Modules Completed</h3>
                <span data-testid="modules-completed-count">1 / 4</span>
            </div>
            <div class="card" data-testid="study-time">
                <h3>Study Time</h3>
                <span data-testid="total-time">120 min</span>
            </div>
        </div>

        <div data-testid="recent-modules-section">
            <h2>Learning Modules</h2>
            <div data-testid="quick-actions-section">
                <button data-testid="quick-action-search">Search</button>
                <button data-testid="quick-action-progress">Progress</button>
            </div>
            <div data-testid="recent-modules-list">
                <div class="card" data-testid="module-card">
                    <h3 data-testid="module-title">Fundamentos da Psicologia Jungiana</h3>
                    <p data-testid="module-description">Introdu√ß√£o √†s teorias b√°sicas de Carl Jung</p>
                    <span>Difficulty: Beginner</span>
                    <span>Time: 45 min</span>
                </div>
                <div class="card" data-testid="module-card">
                    <h3 data-testid="module-title">Arqu√©tipos Jungianos</h3>
                    <p data-testid="module-description">Explorando os arqu√©tipos fundamentais</p>
                    <span>Difficulty: Intermediate</span>
                    <span>Time: 60 min</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Module Page -->
    <div id="modulePage" class="container hidden">
        <div data-testid="module-header">
            <h1 data-testid="module-title">Jung Psychology Module</h1>
        </div>
        <div data-testid="module-content">
            <p>This is the module content area.</p>
        </div>
        <div data-testid="navigation-panel">
            <button data-testid="prev-button">Previous</button>
            <button data-testid="next-button">Next</button>
        </div>
        <div data-testid="progress-bar">
            <div style="width: 30%; height: 8px; background: #007bff;"></div>
        </div>
    </div>

    <script>
        // Simple mock functionality for E2E tests
        let currentPage = 'login';
        
        function showPage(page) {
            document.querySelectorAll('.container').forEach(el => el.classList.add('hidden'));
            document.getElementById(page + 'Page').classList.remove('hidden');
            currentPage = page;
        }
        
        // Login form handling
        document.querySelector('[data-testid="login-form"]').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.querySelector('[data-testid="email-input"]').value;
            const password = document.querySelector('[data-testid="password-input"]').value;
            const errorEl = document.querySelector('[data-testid="server-error"]');
            
            // Mock validation
            if (email.includes('demo') || email.includes('student')) {
                // Success - redirect to dashboard
                showPage('dashboard');
                // Update URL for navigation tests
                window.history.pushState({}, '', '/dashboard');
            } else {
                // Show error
                errorEl.classList.remove('hidden');
            }
        });
        
        // Password toggle
        document.querySelector('[data-testid="password-toggle"]').addEventListener('click', function() {
            const passwordInput = document.querySelector('[data-testid="password-input"]');
            const type = passwordInput.type === 'password' ? 'text' : 'password';
            passwordInput.type = type;
        });
        
        // Module card clicks
        document.querySelectorAll('[data-testid="module-card"]').forEach(card => {
            card.addEventListener('click', function() {
                showPage('module');
                window.history.pushState({}, '', '/module/jung-basics');
            });
        });
        
        // User menu interactions
        document.querySelector('[data-testid="user-menu"]').addEventListener('click', function() {
            const menuItems = document.querySelectorAll('[data-testid="profile-menu-item"], [data-testid="settings-menu-item"], [data-testid="logout-menu-item"]');
            menuItems.forEach(item => {
                item.classList.toggle('hidden');
            });
        });
        
        // Navigation links
        document.querySelector('[data-testid="register-link"]').addEventListener('click', function(e) {
            e.preventDefault();
            window.history.pushState({}, '', '/register');
        });
        
        document.querySelector('[data-testid="forgot-password-link"]').addEventListener('click', function(e) {
            e.preventDefault();
            window.history.pushState({}, '', '/forgot-password');
        });
        
        // Set initial state for tests
        window.addEventListener('load', function() {
            // Check if we should start on dashboard (for authenticated tests)
            if (window.location.href.includes('dashboard')) {
                showPage('dashboard');
            }
        });
        
        // Mock API responses
        if (window.fetch) {
            const originalFetch = window.fetch;
            window.fetch = function(url, options) {
                // Return mock responses for API calls
                if (url.includes('/api/')) {
                    return Promise.resolve({
                        ok: true,
                        json: () => Promise.resolve({ success: true, data: [] })
                    });
                }
                return originalFetch.apply(this, arguments);
            };
        }
    </script>
</body>
</html>